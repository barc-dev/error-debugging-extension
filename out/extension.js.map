{
  "version": 3,
  "sources": ["../hello-world/src/extension.ts", "../hello-world/src/panels/HelloWorldPanel.ts", "../hello-world/src/utilities/getNonce.ts", "../hello-world/src/utilities/getUri.ts"],
  "sourcesContent": ["// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport * as vscode from \"vscode\";\nimport { HelloWorldPanel } from \"./panels/HelloWorldPanel\";\nimport { registerDiagnosticListener } from './backend/DiagnosticListener';\n\n// This method is called when your extension is activated\n// Your extension is activated the very first time the command is executed\n\nexport function activate(context: vscode.ExtensionContext) {\n  const helloCommand = vscode.commands.registerCommand(\n    \"hello-world.helloWorld\",\n    () => {\n      HelloWorldPanel.render(context.extensionUri);\n    },\n  );\n\n  context.subscriptions.push(helloCommand);\n}\n\n// This method is called when your extension is deactivated\nexport function deactivate() {}\n", "import * as vscode from \"vscode\";\nimport * as fs from \"fs\";\nimport * as path from \"path\";\nimport { getNonce } from \"../utilities/getNonce\";\nimport { getUri } from \"../utilities/getUri\";\n\nexport class HelloWorldPanel {\n  public static currentPanel: HelloWorldPanel | undefined;\n  private readonly _panel: vscode.WebviewPanel;\n  private _disposables: vscode.Disposable[] = [];\n  private readonly _editor: vscode.TextEditor | undefined;\n\n  private constructor(\n    panel: vscode.WebviewPanel,\n    extensionUri: vscode.Uri,\n    activeEditor: vscode.TextEditor | undefined,\n  ) {\n    this._panel = panel;\n    this._editor = activeEditor;\n    this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\n    this._panel.webview.html = this._getWebviewContent(\n      this._panel.webview,\n      extensionUri,\n    );\n    this._panel.webview.onDidReceiveMessage((message: any) => {\n      const activeEditor = this._editor; //we now access the activeEditorWindow through the property of the class instance\n      if (message.command === \"ready\") {\n        if (activeEditor === undefined) {\n          this._panel.webview.postMessage({\n            command: \"sendErrorMessage\",\n            text: \"No errors.\",\n          });\n        } else {\n          //grabs the active editor uri (what file is the error in)\n          const activeEditorUri = activeEditor.document.uri;\n          //returns an array of diagnostics\n          const editorDiagnostics =\n            vscode.languages.getDiagnostics(activeEditorUri);\n          //filteredDiagnostics checks to make sure the diagnostic rendered to the frontend is actually an error\n          const filteredDiagnostics = editorDiagnostics.filter(\n            (diagnostic) =>\n              diagnostic.severity === vscode.DiagnosticSeverity.Error,\n          );\n          //.filter always returns an array even if its empty, empty arrays return true.\n          //to check if the array is empty, you need to check its length, not if its truthy or falsy\n          if (filteredDiagnostics.length === 0) {\n            this._panel.webview.postMessage({\n              command: \"sendErrorMessage\",\n              text: \"No errors found.\",\n            });\n            return;\n          }\n\n          this._panel.webview.postMessage({\n            command: \"sendErrorMessage\",\n            fileName: path.basename(activeEditor.document.fileName), //grabs the filename of the active editor\n            lineNumber: filteredDiagnostics[0].range.start.line + 1, //grabs the line of the error\n            message: filteredDiagnostics[0].message, //grabs the error message\n          });\n        }\n      }\n    });\n  }\n\n  public static render(extensionUri: vscode.Uri) {\n    if (HelloWorldPanel.currentPanel) {\n      HelloWorldPanel.currentPanel._panel.reveal(vscode.ViewColumn.One);\n    } else {\n      //active editor is moved down here because we need to capture the \"snapshot\" of the activeTextEditor before it's rendered in the UI\n      const activeEditor = vscode.window.activeTextEditor;\n      const panel = vscode.window.createWebviewPanel(\n        \"hello-world\",\n        \"Hello World\",\n        vscode.ViewColumn.One,\n        {\n          // Enable javascript in the webview\n          enableScripts: true,\n          // Restrict the webview to only load resources from the `out` directory\n          localResourceRoots: [\n            vscode.Uri.joinPath(extensionUri, \"webview-dist\"),\n          ],\n        },\n      );\n\n      HelloWorldPanel.currentPanel = new HelloWorldPanel(\n        panel,\n        extensionUri,\n        activeEditor,\n      );\n    }\n  }\n\n  public dispose() {\n    HelloWorldPanel.currentPanel = undefined;\n\n    this._panel.dispose();\n\n    while (this._disposables.length) {\n      const disposable = this._disposables.pop();\n      if (disposable) {\n        disposable.dispose();\n      }\n    }\n  }\n\n  private _getWebviewContent(\n    webview: vscode.Webview,\n    extensionUri: vscode.Uri,\n  ) {\n    const manifestPath = path.join(\n      extensionUri.fsPath,\n      \"webview-dist\",\n      \"asset-manifest.json\",\n    );\n    const manifest = JSON.parse(fs.readFileSync(manifestPath, \"utf-8\"));\n\n    const cssPath = manifest.files[\"main.css\"];\n    const jsPath = manifest.files[\"main.js\"];\n\n    const stylesUri = getUri(webview, extensionUri, [\n      \"webview-dist\",\n      ...cssPath.split(\"/\").filter(Boolean),\n    ]);\n    const scriptUri = getUri(webview, extensionUri, [\n      \"webview-dist\",\n      ...jsPath.split(\"/\").filter(Boolean),\n    ]);\n\n    const nonce = getNonce();\n\n    return /*html*/ `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource}; script-src 'nonce-${nonce}';\">\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"${stylesUri}\">\n        <title>Hello World</title>\n      </head>\n      <body>\n        <div id=\"root\"></div>\n        <script type=\"module\" nonce=\"${nonce}\" src=\"${scriptUri}\"></script>\n      </body>\n    </html>\n  `;\n  }\n}\n", "export function getNonce() {\n  let text = \"\";\n  const possible =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  for (let i = 0; i < 32; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n}\n", "import { Uri, Webview } from \"vscode\";\n\nexport function getUri(webview: Webview, extensionUri: Uri, pathList: string[]) {\n  return webview.asWebviewUri(Uri.joinPath(extensionUri, ...pathList));\n}"],
  "mappings": "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",
  "names": ["vscode", "activeEditor"]
}
